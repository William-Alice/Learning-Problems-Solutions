# 黑马点评项目

## 一、基于 session 注册的原理

基于 Session 的注册原理，本质是利用服务器端的 Session 机制在用户注册过程中临时存储用户状态（如验证码、临时信息），并在注册成功后创建用户会话，实现用户身份的临时关联。下面从流程和技术细节两方面详细解释：
一、核心流程：Session 在注册中的作用
用户注册的典型流程中，Session 主要用于和，步骤如下：
二、技术细节：Session 如何实现 “状态保持”
三、与 Cookie 的区别（为何用 Session 存敏感信息）
：存储在客户端（浏览器），可被用户篡改（如伪造验证码），适合存非敏感信息（如 SessionID）；
：存储在服务器端，用户无法直接修改，适合存敏感信息（如验证码、用户 ID），因此注册中的验证信息必须存在 Session 中，而非 Cookie。
总结
用 SessionID 关联用户与服务器的会话；
用 Session 临时存储注册过程中的敏感验证信息（如验证码），确保验证安全;
注册成功后，通过 Session 保存用户登录状态，实现后续请求的身份识别。
简单说，Session 就是注册过程中 “服务器记住用户” 的核心机制，既保证了验证安全，又实现了用户状态的连续关联。

## 二、redis 缓存索引

【Redis 索引是 “用合适的数据结构存储查询维度与目标数据的关联关系”】
Redis 中缓存索引的核心是存储 “索引维度（查询条件）→ 目标数据标识 / 关联数据” 的映射关系，而非简单的 “key 是索引，value 是数据”。索引的载体可以是 Redis 的 key，也可以是 Hash 的 field、Set 的 member 等，value 通常是数据 ID 集合、关联标识或轻量化数据（而非完整业务数据，完整数据可再缓存或查库）。

## 三、请求过程中的多级缓存示意图

![alt text](images/1764336467743.png)

## 添加缓存示意图

![alt text](images/1764336360247.png)

## BeanUtil.copyToList 是 Hutool 中用于 “对象列表 → 对象列表” 的属性复制工具

## 四、缓存更新策略

![alt text](images/1764408091706.png)

## 主动更新策略

![alt text](images/1764411685077.png)

## 手动操作缓存常见问题

![alt text](images/1764412022757.png)

## 更新数据库时，线程并发安全问题

![alt text](images/1764412822532.png)

## 缓存最佳实践方案

![alt text](images/1764413118576.png)
